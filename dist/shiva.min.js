!function(t){function e(){}function n(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function r(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?i:s)(e.promise,t._value);var o;try{o=n(t._value)}catch(r){return void s(e.promise,r)}i(e.promise,o)}))}function i(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof o)return t._state=3,t._value=e,void a(t);if("function"==typeof r)return void u(n(r,e),t)}t._state=1,t._value=e,a(t)}catch(i){s(t,i)}}function s(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)r(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,i(e,t))},function(t){n||(n=!0,s(e,t))})}catch(o){if(n)return;n=!0,s(e,o)}}var c=setTimeout;o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,n){var o=new this.constructor(e);return r(this,new l(t,n,o)),o},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function o(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){o(i,t)},n)}e[i]=s,0===--r&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var r=e.length,i=0;i<e.length;i++)o(i,e[i])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){c(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},"undefined"!=typeof module&&module.exports?module.exports=o:t.Promise||(t.Promise=o)}(this),function(){var t,e=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t){var e=function(){function t(){}return t.button={fontSize:"1.2em",fontFamily:"sans-serif",backgroundColor:"#fefefe",hover:{backgroundColor:"#dddddd",durationOut:1,durationIn:0,color:"#000000"},padding:"0.75rem",textAlign:"left",whiteSpace:"nowrap",msTouchAction:"manipulation",touchAction:"manipulation",cursor:"pointer",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none",border:"2px solid transparent",borderColor:"#eeeeee",color:"#000000",text:"Button"},t.drop={fontFamily:"sans-serif",fontSize:"1.2rem",backgroundColor:"#ffffff",color:"#000000",padding:"1rem",durationExpand:.5,durationContract:.5,border:"2px solid transparent",borderColor:"#eeeeee",dropGap:"0.1rem",hover:{backgroundColor:"#dddddd",color:"#000000",durationIn:0,durationOut:.5},caret:{width:"0px",height:"0px",borderLeftWidth:"0.35rem",borderLeftStyle:"solid",borderLeftColor:"transparent",borderRightWidth:"0.35rem",borderRightStyle:"solid",borderRightColor:"transparent",borderTopWidth:"0.35rem",borderTopStyle:"solid",borderTopColor:"black",display:"inline-block",verticalAlign:"middle",marginLeft:"0.35rem",pointerEvents:"none",transform:"translateY(-0.1rem)"}},t}();t.Styles=e}(t||(t={}));var t;!function(t){var e=function(){function t(){}return t.Linear="linear",t.Ease="ease",t.EaseIn="ease-in",t.EaseOut="ease-out",t.EaseInOut="ease-in-out",t}();t.Ease=e}(t||(t={}));var t;!function(t){var e=function(){function t(){this.callback=function(){console.error("transition not set")}}return t.prototype.then=function(e,n){return this.callback=e,new t},t.prototype.execute=function(){this.callback&&this.callback(this.data)},t.prototype.printCallback=function(){return this},t}();t.Transition=e}(t||(t={}));var t;!function(t){var e=function(){function t(){}return t.merge=function(e,n){"object"!=typeof e&&(e={});for(var o in n)if(n.hasOwnProperty(o)){var r=n[o];if("object"==typeof r){e[o]=t.merge(e[o],r);continue}e[o]=r}return e},t}();t.ObjectUtils=e}(t||(t={}));var t;!function(t){var e=function(){function t(t,e,n,o){this._type=t,this._target=e,this._sourceEvent=o,this._data=n}return Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceEvent",{get:function(){return this._sourceEvent},enumerable:!0,configurable:!0}),t}();t.Event=e;var n=function(){function t(){this._listeners=[]}return t.prototype.hasEventListener=function(t,e){for(var n=!1,o=0;o<this._listeners.length;o++)this._listeners[o].type===t&&this._listeners[o].listener===e&&(n=!0);return n},t.prototype.addEventListener=function(t,e,n,o,r,i){void 0===r&&(r=!1),void 0===i&&(i=void 0),this.hasEventListener(e,n)||this._listeners.push({scope:t,type:e,listener:n,useCapture:r,scopedEventListener:i,data:o})},t.prototype.removeEventListener=function(t,e){var n=this._listeners.filter(function(n){return n.type===t&&n.listener.toString()===e.toString()});return this._listeners=this._listeners.filter(function(n){return!(n.type===t&&n.listener.toString()===e.toString())}),n[0]},t.prototype.dispatchEvent=function(t){for(var e=0;e<this._listeners.length;e++)this._listeners[e].type===t.type&&(this._listeners[e].data&&(t.data=this._listeners[e].data),this._listeners[e].listener.call(this._listeners[e].scope,t))},t}();t.EventDispatcher=n}(t||(t={}));var t;!function(t){var e=function(){function t(){}return t.addEventListener=function(t,e,n){this.observers[e]||(this.observers[e]=[]),this.observers[e].push({scope:t,type:e,callback:n})},t.removeEventListener=function(t,e){for(var n,o=0;o<this.observers[t].length;o++)if(this.observers[t].callback===e){n=o;break}this.observers[t].splice(n,1)},t.dispatchEvent=function(t){var e=t.type;if(this.observers[e])for(var n=0;n<this.observers[e].length;n++)this.observers[e][n].callback.call(this.observers[e][n].scope,t);else console.error("No Observer registered for: ",t)},t.observers={},t}();t.Observer=e}(t||(t={}));var t;!function(t){var e=function(){function t(){}return t.proportionalOutside=function(t,e,n,o){var r=t/e,i=n,s=n/r;return s<o&&(s=o,i=s*r),{height:s,width:i}},t.proportionalInside=function(t,e,n,o){var r=t/e,i=n,s=n*r;return s>o&&(s=o,i=s*r),{height:s,width:i}},t}();t.Resize=e}(t||(t={}));var t;!function(t){var e=function(){function t(){}return t.scrollY=function(){var t=document.body.scrollTop;return 0==t&&(t=window.pageYOffset?window.pageYOffset:document.body.parentElement?document.body.parentElement.scrollTop:0),t},t.scrollX=function(){var t=document.body.scrollLeft;return 0==t&&(t=window.pageXOffset?window.pageXOffset:document.body.parentElement?document.body.parentElement.scrollLeft:0),t},Object.defineProperty(t,"height",{get:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t,"width",{get:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},enumerable:!0,configurable:!0}),t}();t.Window=e}(t||(t={}));var t;!function(t){var e=function(){function t(){}return t.style=function(t,e){var n;n=t.element?t.element:t;for(var o in e)if(e.hasOwnProperty(o)){var r=e[o];if("number"==typeof r&&r)switch(o){case"x":r=e[o].toString(),r+="px";break;case"y":r=e[o].toString(),r+="px";break;case"height":r=e[o].toString(),r+="px";break;case"width":r=e[o].toString(),r+="px"}var i=o;switch(o){case"x":i="left";break;case"y":i="top";break;case"alpha":i="opacity"}n.style[i]=r}},t}();t.Properties=e}(t||(t={}));var t;!function(t){var n=function(n){function o(t){var e=this;if(n.call(this),this.transitions={},t){if(t.root?(this._element=document.createElement("div"),this._element.style.position="absolute",this._element.style.height="100%",this._element.style.width="100%",this._element.style.top="0px",this._element.style.left="0px",this._element.style.margin="0px",this._element.id="app",document.body.appendChild(this._element)):t.type?this._element=document.createElement(t.type):this._element=document.createElement("div"),t.id&&(this._element.id=t.id),t.text&&(this.innerHtml=t.text),this._data=t.data,t.styles){var o=t.styles;o.map(function(t){e.style(t)})}this.style(t.style),t.className&&("string"==typeof t.className?this.className(t.className):this.className.apply(this,t.className))}else this._element=document.createElement("div")}return e(o,n),o.prototype.addToBody=function(){document.body.appendChild(this._element)},o.prototype.style=function(e){t.Properties.style(this._element,e)},o.prototype.className=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.reduce(function(t,e){return t+" "+e});this._element.className?this._element.className=this._element.className+" "+n:this._element.className=n},o.prototype.addChild=function(t){var e;t.element&&(e=t.element),this._element.appendChild(e)},o.prototype.removeChild=function(t){this._element===t.element.parentNode&&this._element.removeChild(t.element)},o.prototype.to=function(e){var n=this,o=10;return e.delay&&(o=1e3*e.delay),setTimeout(function(){for(var t in e.toVars){var o={};e.duration&&(o.duration=e.duration),n.transitions[t]?o.count=n.transitions[t].count+1:o.count=0,n.transitions[t]=o}n.style({transition:n.convertTransitionObjectToString(n.transitions)}),e.ease&&n.style({transitionTimingFunction:e.ease.toString()}),n.style(e.toVars)},o),e.resolve?(setTimeout(function(){n.style({transition:n.removeCompletedTransitionsAndReapply(e.toVars)}),n.dispatchEvent(new t.Event("TRANSITION_COMPLETE",n)),e.resolve()},1e3*e.duration+o),null):new Promise(function(r,i){setTimeout(function(){n.style({transition:n.removeCompletedTransitionsAndReapply(e.toVars)}),r(),n.dispatchEvent(new t.Event("TRANSITION_COMPLETE",n))},1e3*e.duration+o)})},o.prototype.convertTransitionStyleToObject=function(t){var e=this;if(t.transitionProperty){var n=t.transitionProperty.split(","),o=t.transitionDuration.split(","),r=t.transitionDelay.split(","),i={},s=0;return n.map(function(t){var n=t.replace(/^\s/g,"");n=e.hyphenToCamel(n);var a={};o[s].replace(/^\s/g,"");if(o[s]&&(a.duration=o[s].replace(/^\s/g,"").replace("s","")),r[s]){var l=r[s].replace(/^\s/g,"").replace("s","");"initial"!==l&&(a.delay=l)}i[n]=a,s++}),i}return{}},o.prototype.convertTransitionObjectToString=function(t){var e="";for(var n in t){""!==e&&(e+=", ");var o=this.camelToHyphen(n);e+=o+" "+t[n].duration+"s",t[n].delay&&(e+=" "+t[n].delay+"s")}return e},o.prototype.removeCompletedTransitionsAndReapply=function(t){for(var e in t)this.transitions[e]&&(this.transitions[e].count>0?this.transitions[e].count--:delete this.transitions[e]);return this.convertTransitionObjectToString(this.transitions)},o.prototype.fromTo=function(t){var e=this;return t.delay?(t.delay=1e3*t.delay,t.immediateRender&&this.style(t.fromVars)):(this.style(t.fromVars),t.delay=10),new Promise(function(n,o){setTimeout(function(){e.style(t.fromVars),setTimeout(function(){e.to({duration:t.duration,ease:t.ease,toVars:t.toVars,resolve:n})},10)},t.delay)})},o.prototype.camelToHyphen=function(t){return t.replace(/[a-z][A-Z]/g,function(t,e){var n=t.split("");n[2]=n[1],n[1]="-",n[2]=n[2].toLowerCase();var o="";return n.map(function(t){o+=t}),o})},o.prototype.hyphenToCamel=function(t){return t.replace(/-([a-z])/g,function(t,e){return t[1].toUpperCase()})},o.prototype.addEventListener=function(e,o,r,i,s){void 0===s&&(s=!1);var a=this,l=function(n){r.apply(e,[new t.Event(o,a,i,n)])};n.prototype.addEventListener.call(this,e,o,r,i,s,l),this._element.addEventListener?this._element.addEventListener(o,l,s):this._element.attachEvent&&(this._element.attachEvent("on"+o,l),this._element.attachEvent("onpropertychange",function(t){t.eventType===o&&(t.cancelBubble=!0,t.returnValue=!1,t.data=t.customData,l(t))}))},o.prototype.removeEventListener=function(t,e){var o=n.prototype.removeEventListener.call(this,t,e);return this._element.removeEventListener?this._element.removeEventListener(t,o.scopedEventListener,o.useCapture):this._element.detachEvent&&this._element.detachEvent("on"+t,e),o},o.prototype.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},Object.defineProperty(o.prototype,"width",{get:function(){return this.shadow().width},set:function(e){t.Properties.style(this._element,{width:e})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.shadow().height},set:function(e){t.Properties.style(this._element,{height:e})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this._element.offsetTop},set:function(e){t.Properties.style(this._element,{y:e})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x",{get:function(){return this._element.offsetLeft},set:function(e){t.Properties.style(this._element,{x:e})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"alpha",{get:function(){return parseFloat(this._element.style.opacity)},set:function(e){t.Properties.style(this._element,{opacity:e.toString()})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),o.prototype.hide=function(){t.Properties.style(this._element,{display:"none"})},o.prototype.show=function(){t.Properties.style(this._element,{display:"block"})},o.prototype.fillContainer=function(){t.Properties.style(this._element,{minWidth:"100%",minHeight:"100%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",position:"relative"})},o.prototype.centreHorizontal=function(){t.Properties.style(this._element,{display:"block",marginLeft:"auto",marginRight:"auto",position:"relative"})},o.prototype.centreHorizontalText=function(){t.Properties.style(this._element,{textAlign:"center"})},o.prototype.shadow=function(){if(document.body.contains(this._element))return this.dimensionsPolyfill();var t=this._element.parentElement;document.body.appendChild(this._element);var e=this.dimensionsPolyfill();return document.body.removeChild(this._element),t?t.appendChild(this._element):document.body.removeChild(this._element),e},o.prototype.dimensionsPolyfill=function(){var e=this._element.getBoundingClientRect().height,n=this._element.getBoundingClientRect().width;n&&e||(n=this._element.scrollWidth,e=this._element.scrollHeight);var o=new t.Dimensions(n,e);return o},Object.defineProperty(o.prototype,"value",{get:function(){var t=this._element;return t.value},set:function(t){var e=this._element;e.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._element.id},set:function(t){this._element.id=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerHtml",{get:function(){return this._element.innerHTML},set:function(t){this._element.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"href",{get:function(){var t=this._element;return t.href},set:function(t){var e=this._element;e.href=t},enumerable:!0,configurable:!0}),o.TRANSITION_COMPLETE="TRANSITION_COMPLETE",o}(t.EventDispatcher);t.Container=n}(t||(t={}));var t;!function(t){var n=function(t){function n(e){e.type="a",t.call(this,e);var n=this.element;n.href=e.href}return e(n,t),n}(t.Container);t.Anchor=n}(t||(t={}));var t;!function(t){var n=function(n){function o(e){var r=this;e=e||{},e.href?e.type="a":e.type="button";var i=o.text;e.text&&(i=e.text,e.text=null),n.call(this,e),this.stateOver=!1,e.href&&(this.href=e.href),this.enabled=!0,this.styles=t.ObjectUtils.merge({},t.Styles.button),e.styles&&e.styles.map(function(e){e=r.populateEmptyHoverStyles(e),r.styles=t.ObjectUtils.merge(r.styles,e)}),e.style&&(e.style=this.populateEmptyHoverStyles(e.style),this.styles=t.ObjectUtils.merge(this.styles,e.style));var s=document.createTextNode(i);if(this.element.appendChild(s),this.styles.icon&&this.styles.icon.code){var a=new t.Container({type:"span",style:{display:"inline-block",fontFamily:t.Styles.button.fontFamily,fontSize:t.Styles.button.fontSize,pointerEvents:"none"},text:this.styles.icon.code});"left"===this.styles.icon.align?(a.style({paddingRight:t.Styles.button.padding}),this.element.removeChild(s),this.addChild(a),this.element.appendChild(s)):(a.style({paddingLeft:t.Styles.button.padding}),this.addChild(a)),a.style(this.styles.icon.style)}this.styles.cursor="pointer",this.addEventListener(this,"mouseover",this.overWithEnable),this.addEventListener(this,"mouseout",this.outWithEnable),this.style(this.styles)}return e(o,n),o.prototype.showOutTransition=function(t){var e=this;if(this.stateOver&&this.enabled){var n=t.sourceEvent;n.preventDefault(),n.stopImmediatePropagation(),n.stopPropagation(),this.to({duration:this.styles.hover.durationOut,toVars:{backgroundColor:this.styles.backgroundColor,color:this.styles.color}}).then(function(){e.stateOver&&e.over()})}},o.prototype.over=function(){this.stateOver=!0,this.to({duration:this.styles.hover.durationIn,toVars:{backgroundColor:this.styles.hover.backgroundColor,color:this.styles.hover.color}})},o.prototype.out=function(){this.stateOver=!1,this.to({duration:this.styles.hover.durationOut,toVars:{backgroundColor:this.styles.backgroundColor,color:this.styles.color}})},o.prototype.click=function(e){if(this.enabled){var n=new t.Event(o.CLICK,this,e);this.dispatchEvent(n)}},o.prototype.disable=function(){this.enabled=!1,this.style({cursor:"default"})},o.prototype.select=function(){this.enabled=!1,this.style({cursor:"default"})},o.prototype.enable=function(){this.enabled=!0,this.style({cursor:"pointer"}),this.out()},o.prototype.overWithEnable=function(t){this.enabled&&this.over()},o.prototype.outWithEnable=function(t){this.enabled&&this.out()},o.prototype.populateEmptyHoverStyles=function(t){return this.styles.hover?(this.styles.hover.color||(t.hover.color=t.color),this.styles.hover.backgroundColor||(t.hover.backgroundColor=t.backgroundColor)):t.hover={backgroundColor:t.backgroundColor,color:t.color},t},o.CLICK="click",o.text="Button",o}(t.Container);t.Button=n}(t||(t={}));var t;!function(t){var n=function(t){function n(e){t.call(this,{type:"input"});var n=this.element;n.type="checkbox",e&&(e.id&&(this.id=e.id),this.style(e.style),this.style(e),n.checked=e.checked)}return e(n,t),Object.defineProperty(n.prototype,"checked",{get:function(){var t=this.element;return t.checked},enumerable:!0,configurable:!0}),n.CLICK="click",n}(t.Container);t.CheckBox=n}(t||(t={}));var t;!function(t){var e=function(){function t(t,e){this.width=t,this.height=e}return t}();t.Dimensions=e}(t||(t={}));var t;!function(t){var n=function(n){function o(e){var o=this;n.call(this,{id:e.id||"drop-down"}),this.items=[],this.buttonStyle=t.ObjectUtils.merge({},t.Styles.drop),e.styles&&e.styles.map(function(e){o.buttonStyle=t.ObjectUtils.merge(o.buttonStyle,e),e.button&&(o.buttonStyle=t.ObjectUtils.merge(o.buttonStyle,e.button))}),e.style&&(this.buttonStyle=t.ObjectUtils.merge(this.buttonStyle,e.style),e.style.button&&(this.buttonStyle=t.ObjectUtils.merge(this.buttonStyle,e.style.button))),this.buttonStyle.zIndex="1337",this.button=new t.Button({style:this.buttonStyle,text:e.text}),this.addChild(this.button);var r=t.ObjectUtils.merge({},t.Styles.drop.caret);e.styles&&e.styles.map(function(e){e.color&&(r.borderTopColor=e.color),e.caret&&(r=t.ObjectUtils.merge(r,e.caret))}),e.style&&(e.style.color&&(r.borderTopColor=e.style.color),e.style.caret&&(r=t.ObjectUtils.merge(r,e.style.caret))),this.caret=new t.Container({id:"drop-caret",style:r}),this.button.addChild(this.caret),this.button.addEventListener(this,"mouseup",this.buttonClicked),this.button.addEventListener(this,"mouseover",this.buttonOver),this.button.addEventListener(this,"mouseout",this.buttonOut),this.dropStyle=t.ObjectUtils.merge({},t.Styles.drop),e.styles&&e.styles.map(function(e){o.dropStyle=t.ObjectUtils.merge(o.dropStyle,e)}),e.style&&(this.dropStyle=t.ObjectUtils.merge(this.dropStyle,e.style)),this.unorderedList=new t.Container({type:"ul",styles:[this.dropStyle,{listStyle:"none",zIndex:"1336",position:"absolute",overflow:"hidden",padding:"0rem",marginTop:this.dropStyle.dropGap}]}),this.addChild(this.unorderedList),this.itemStyle=t.ObjectUtils.merge({},t.Styles.drop),this.itemStyle.borderStyle="",this.itemStyle.borderWidth="",this.itemStyle.borderColor="",this.itemStyle.borderImage="",e.styles&&e.styles.map(function(e){o.itemStyle=t.ObjectUtils.merge(o.itemStyle,e),o.itemStyle.borderStyle="",o.itemStyle.borderWidth="",o.itemStyle.borderColor="",o.itemStyle.borderImage="",e.item&&(o.itemStyle=t.ObjectUtils.merge(o.itemStyle,e.item))}),e.style&&(this.itemStyle=t.ObjectUtils.merge(this.itemStyle,e.style),this.itemStyle.borderStyle="",this.itemStyle.borderWidth="",this.itemStyle.borderColor="",this.itemStyle.borderImage="",e.style.item&&(this.itemStyle=t.ObjectUtils.merge(this.itemStyle,e.style.item)));var i=0;e.options.map(function(e){var n=new t.Container({id:i.toString(),type:"li"});o.unorderedList.addChild(n);var r=new t.Container({id:i.toString(),type:"a",styles:[o.itemStyle,{display:"list-item",cursor:"pointer"}]});o.items.push(n),r.innerHtml=e,r.addEventListener(o,"mouseover",o.itemOver),r.addEventListener(o,"mouseout",o.itemOut),r.addEventListener(o,"mouseup",o.itemClicked),n.addChild(r),i++}),this.itemStyle.backgroundColor||(this.itemStyle.backgroundColor=this.dropStyle.backgroundColor),this.itemStyle.color||(this.itemStyle.color=this.dropStyle.color),this.unorderedList.style({display:"none"}),this.style({position:"relative"}),this.durationContract=t.Styles.drop.durationContract,this.durationExpand=t.Styles.drop.durationExpand,e.styles&&e.styles.map(function(t){t.durationExpand&&(o.durationExpand=t.durationExpand),t.durationContract&&(o.durationContract=t.durationContract)}),e.style&&(e.style.durationExpand&&(this.durationExpand=e.style.durationExpand),e.style.durationContract&&(this.durationContract=e.style.durationContract))}return e(o,n),o.prototype.buttonOver=function(t){this.buttonStyle.hover&&this.caret.to({duration:this.buttonStyle.hover.durationIn,toVars:{borderTopColor:this.buttonStyle.hover.color}})},o.prototype.buttonOut=function(t){this.buttonStyle.hover&&this.caret.to({duration:this.buttonStyle.hover.durationOut,toVars:{borderTopColor:this.buttonStyle.color}})},o.prototype.itemClicked=function(e){var n=this,r=e.target;this.dispatchEvent(new t.Event(o.CHANGE,this,r.id)),this.unorderedList.style({opacity:"1"}),this.unorderedList.to({duration:this.durationContract,delay:.3,toVars:{opacity:"0"}}).then(function(){n.unorderedList.style({display:"none"})})},o.prototype.itemOver=function(t){var e=t.target;e.to({duration:this.itemStyle.hover.durationIn,toVars:{backgroundColor:this.itemStyle.hover.backgroundColor,color:this.itemStyle.hover.color}})},o.prototype.itemOut=function(t){var e=t.target;e.to({duration:this.itemStyle.hover.durationOut,toVars:{backgroundColor:this.itemStyle.backgroundColor,color:this.itemStyle.color}})},o.prototype.buttonClicked=function(t){var e=this;this.unorderedList.style({display:"block"}),this.unorderedList.fromTo({duration:this.durationExpand,immediateRender:!0,fromVars:{opacity:"0",transform:"translateY(-10px)"},toVars:{opacity:"1",transform:"translateY(0px)"}}),this.scopedEventHandler=function(t){e.closeDrop(t)},document.addEventListener("mouseup",this.scopedEventHandler,!0),this.button.removeEventListener("mouseup",this.buttonClicked)},o.prototype.closeDrop=function(t){var e=this;document.removeEventListener("mouseup",this.scopedEventHandler,!0),setTimeout(function(){e.button.addEventListener(e,"mouseup",e.buttonClicked)},10),this.unorderedList.to({duration:this.durationContract,toVars:{opacity:"0"}}).then(function(){e.unorderedList.style({display:"none"})})},o.prototype.disable=function(){this.button.disable(),this.button.removeEventListener(t.Button.CLICK,this.buttonClicked)},o.prototype.enable=function(){this.button.enable(),this.button.addEventListener(this,t.Button.CLICK,this.buttonClicked)},o.CHANGE="change",o}(t.Container);t.DropDown=n}(t||(t={}));var t;!function(t){var n=function(t){function n(e){var n;n=e.style?e.style:{},n.type="img",t.call(this,n),this.load(e.path)}return e(n,t),n.prototype.load=function(t){this.element.setAttribute("src",t)},n.COMPLETE="load",n.ERROR="error",n}(t.Container);t.Image=n}(t||(t={}));var t;!function(t){var n=function(t){function n(e){var n=this;t.call(this,{id:e.id,style:{position:"relative"}}),this.pages={},this.zIndex=100,this.routes=!0,this.config=e,this.style(e.style),e.routes===!1&&(this.routes=!1),this.routes&&(window.addEventListener("popstate",function(t){var e;e=null===t.state?window.location.pathname:t.state,n.changePage(e)}),this.changePage(window.location.pathname))}return e(n,t),n.prototype.update=function(t){t=decodeURIComponent(t),t!==this.currentPageName&&(this.routes&&history.pushState(null,null,t),this.changePage(t))},n.prototype.changePage=function(t){var e=this;if(this.currentPageName=t,this.config.pages[t]){if(clearTimeout(this.delayTimeout),this.currentPage)if(this.currentPage.sleep&&this.currentPage.sleep(),this.config.delayTransition){var n=this.currentPage;this.delayTimeout=setTimeout(function(){e.removeChild(n)},1e3*this.config.delayTransition)}else this.removeChild(this.currentPage);if(this.pages[t]);else{var o=new this.config.pages[t](t);this.pages[t]=o}this.currentPage=this.pages[t],this.currentPage.wake&&this.currentPage.wake(),this.currentPage.style({position:"absolute",width:"100%",top:"0px",left:"0px"}),this.addChild(this.currentPage)}else this.config.redirect?this.update("/"):this.config.errorPage&&this.changePage(this.config.errorPage)},n}(t.Container);t.Pages=n}(t||(t={}));var t;!function(t){var n=function(t){function n(e){t.call(this,{type:"input"});var n=this.element;n.type="radio",e&&(e.id&&(this.id=e.id),this.style(e.style),this.style(e),n.checked=e.checked)}return e(n,t),Object.defineProperty(n.prototype,"checked",{get:function(){var t=this.element;return t.checked},enumerable:!0,configurable:!0}),n.CLICK="click",n}(t.Container);t.RadioButton=n}(t||(t={}));var t;!function(t){var n=function(n){function o(e){var o=this;e.type="select",n.call(this,e);var r=this.element;e.name&&(r.name=e.name);var i=e.options;i.map(function(e){var n=new t.Container({text:e,type:"option"});o.addChild(n)})}return e(o,n),Object.defineProperty(o.prototype,"value",{get:function(){var t=this.element;return t.value},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selectedIndex",{get:function(){var t=this.element;return t.selectedIndex},enumerable:!0,configurable:!0}),o.CHANGE="change",o}(t.Container);t.Select=n}(t||(t={}));var t;!function(t){var n=function(t){function n(){t.apply(this,arguments)}return e(n,t),n.get=function(t){return this.load(t,this.httpMethods.GET)},n.post=function(t){return this.load(t,this.httpMethods.POST)},n.put=function(t){return this.load(t,this.httpMethods.PUT)},n.update=function(t){return this.load(t,this.httpMethods.UPDATE)},n["delete"]=function(t){return this.load(t,this.httpMethods.DELETE)},n.load=function(t,e){var o=this;return new Promise(function(r,i){var s=new XMLHttpRequest;e===n.httpMethods.GET&&(t.url=t.url+o.concatParams(t.params)),s.open(e,t.url,!0),s.timeout=2e4,t.headers&&t.headers.map(function(t){s.setRequestHeader(t.value,t.variable)}),s.onload=function(){return o.handleResponse(s,r,i,t.data)},s.onerror=function(){return i(new Error("Network Error"))},s.send(t.params)})},n.concatParams=function(t){var e="?";for(var n in t)t.hasOwnProperty(n)&&(e=e.concat(n,"=",encodeURI(t[n]),"&"));return e=e.slice(0,-1)},n.handleResponse=function(t,e,n,o){if(200===t.status)return e(t.responseText);var r=void 0;return r=0===t.status?"Network Error 0x2ee7":t.statusText,n(new Error(r))},n.httpMethods={GET:"GET",PUT:"PUT",POST:"POST",DELETE:"DELETE",UPDATE:"UPDATE"},n.COMPLETE="COMPLETE",n.ERROR="ERROR",n}(t.EventDispatcher);t.Loader=n}(t||(t={}));var t;!function(t){var n=function(t){function n(e,n,o,r,i,s,a){t.call(this,e,n,s,a),this._response=o,this._status=r,this._httpMetaData=i}return e(n,t),Object.defineProperty(n.prototype,"response",{get:function(){return this._response},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"httpMetaData",{get:function(){return this._httpMetaData},enumerable:!0,configurable:!0}),n}(t.Event);t.LoaderEvent=n}(t||(t={}));var n="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")(),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===i;a&&n.process;"function"==typeof define&&"object"==typeof define.amd&&define.amd?(r.shiva=t,define(function(){return t})):s?((s.exports=t).shiva=t,i.shiva=t):r.shiva=t}.call(this);